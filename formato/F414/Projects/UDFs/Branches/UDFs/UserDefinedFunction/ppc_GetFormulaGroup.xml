<object stamp="afd66057-1da8-491b-821f-b359f918b6e8_1616702008169" type="UserDefinedFunction" version="2.0">
    <property name="objectId" value="e918568d-86c9-4c6c-a363-06fadce03b5b" valueType="string"/>
    <property name="branchId" value="UDFs" valueType="string"/>
    <property name="name" value="ppc_GetFormulaGroup" valueType="string"/>
    <property name="description" value="2021.02.14" valueType="string"/>
    <property name="arguments" valueType="table">
        <object type="UserDefinedFunction:argument" version="1.0">
            <property name="name" value="GFG_nameFunction" valueType="string"/>
            <property name="description" value="name function (type argument - STRING)" valueType="string"/>
        </object>
        <object type="UserDefinedFunction:argument" version="1.0">
            <property name="name" value="GFG_countElementsInFormula" valueType="string"/>
            <property name="description" value="count argument in the formula (type argument - INTEGER)" valueType="string"/>
        </object>
        <object type="UserDefinedFunction:argument" version="1.0">
            <property name="name" value="GFG_elements" valueType="string"/>
            <property name="description" value="list formula arguments (type argument - list())" valueType="string"/>
        </object>
    </property>
    <property name="body" valueType="object">
        <object type="ASLExpression" version="1.0">
            <property name="expression" valueType="table">
                <object type="ASLExpression:part" version="1.0">
                    <property name="expression" value="&lt;!--&#xa;Copyright by AXIOM SL, Igor Kirilyuk&#xa;Version of 2021.02.14&#xa;Get formula group&#xa;Input variables:&#xa;GFG_nameFunction - name function (type argument - STRING);&#xa;GFG_countElementsInFormula - count argument in the formula (type argument - INTEGER);&#xa;GFG_elements - list formula arguments (type argument - list())&#xa;-->&#xa;trace(&quot;#!#!#! ppc_GetFormulaGroup. Started #!#!#!&quot;);&#xa;trace(&quot;#!#!#! ppc_GetFormulaGroup. Copyright by AXIOM SL, Igor Kirilyuk, 2021.02.14 #!#!#!&quot;);&#xa;&#xa;var GFG_startDate = new(&quot;java.util.Date&quot;);&#xa;&#xa;var GFG_resultFormula = &quot;&quot;;&#xa;&lt;if> (GFG_elements.size() &amp;gt; 0) and (GFG_countElementsInFormula &amp;gt; 0)&#xa;&#x9;&lt;then>&#xa;&#x9;&#x9;var GFG_resultListFormula = new(&quot;java.util.LinkedHashMap&quot;);&#xa;&#x9;&#x9;var GFG_resultListCount = new(&quot;java.util.LinkedHashMap&quot;);&#xa;&#x9;&#x9;var GFG_elementsFormula = &quot;&quot;;&#xa;&#x9;&#x9;var GFG_bufferFormula;&#xa;&#x9;&#x9;var GFG_bufferCount;&#xa;&#x9;&#x9;&lt;for> var index = 0 &lt;comma/> index &amp;lt;= GFG_elements.size() &lt;comma/> index++&#xa;&#x9;&#x9;&#x9;&lt;do>&#xa;&#x9;&#x9;&#x9;&#x9;GFG_elementsFormula = GFG_elementsFormula + if(index &amp;lt; GFG_elements.size(), if(!GFG_elementsFormula.isEmpty(), &quot;,&quot;, &quot;&quot;) + GFG_elements.get(index), &quot;&quot;);&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;&lt;if> ((index + 1) % GFG_countElementsInFormula == 0) or (index &amp;gt;= (GFG_elements.size() - 1))&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;then>&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;if> !GFG_elementsFormula.isEmpty()&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;then>&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_bufferFormula = GFG_resultListFormula.get(&quot;0&quot;);&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_resultListFormula.put(&quot;0&quot;, if((GFG_bufferFormula != null) and (!&quot;&quot;.equals(GFG_bufferFormula)), GFG_bufferFormula + if(!&quot;&quot;.equals(GFG_bufferFormula), &quot;,&quot;, &quot;&quot;), &quot;&quot;) + GFG_nameFunction + &quot;(&quot; + GFG_elementsFormula + &quot;)&quot;);&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_bufferCount = GFG_resultListCount.get(&quot;0&quot;);&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_resultListCount.put(&quot;0&quot;, if(GFG_bufferCount != null, GFG_bufferCount + 1, 1));&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/then>&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/if>&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;for> var indexLevel = GFG_resultListFormula.size() - 1 &lt;comma/> indexLevel &amp;gt;= 0 &lt;comma/> indexLevel--&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;do>&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_bufferCount = GFG_resultListCount.get(&quot;&quot; + indexLevel);&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;if> GFG_bufferCount &amp;gt;= GFG_countElementsInFormula&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;then>&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_bufferFormula = GFG_resultListFormula.get(&quot;&quot; + (indexLevel + 1));&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_resultListFormula.put(&quot;&quot; + (indexLevel + 1), if((GFG_bufferFormula != null) and (!&quot;&quot;.equals(GFG_bufferFormula)), GFG_bufferFormula + if(!&quot;&quot;.equals(GFG_bufferFormula), &quot;,&quot;, &quot;&quot;), &quot;&quot;) + GFG_nameFunction + &quot;(&quot; + GFG_resultListFormula.get(&quot;&quot; + indexLevel) + &quot;)&quot;);&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_bufferCount = GFG_resultListCount.get(&quot;&quot; + (indexLevel + 1));&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_resultListCount.put(&quot;&quot; + (indexLevel + 1), if(GFG_bufferCount != null, GFG_bufferCount + 1, 1));&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_resultListFormula.put(&quot;&quot; + indexLevel, &quot;&quot;);&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_resultListCount.put(&quot;&quot; + indexLevel, 0);&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/then>&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/if>&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/do>&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/for>&#x9;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;GFG_elementsFormula = &quot;&quot;;&#xa;&#x9;&#x9;&#x9;&#x9;&#x9;&lt;/then>&#xa;&#x9;&#x9;&#x9;&#x9;&lt;/if>&#x9;&#xa;&#x9;&#x9;&#x9;&lt;/do>&#xa;&#x9;&#x9;&lt;/for>&#x9;&#xa;&#x9;&#x9;&#xa;&#x9;&#x9;&lt;for> var indexLevel = GFG_resultListFormula.size() - 1 &lt;comma/> indexLevel &amp;gt;= 0 &lt;comma/> indexLevel--&#xa;&#x9;&#x9;&#x9;&lt;do>&#xa;&#x9;&#x9;&#x9;&#x9;GFG_resultFormula = GFG_resultFormula + if(!GFG_resultListFormula.get(&quot;&quot; + indexLevel).trim().isEmpty(), if(!GFG_resultFormula.isEmpty(), &quot;,&quot;, &quot;&quot;) + GFG_resultListFormula.get(&quot;&quot; + indexLevel), &quot;&quot;);&#xa;&#x9;&#x9;&#x9;&lt;/do>&#xa;&#x9;&#x9;&lt;/for>&#x9;&#xa;&#x9;&#x9;GFG_resultFormula = if((GFG_resultListFormula.size() &amp;gt; 1) or ((GFG_resultListFormula.size() == 1) and (GFG_resultListCount.get(&quot;0&quot;) &amp;gt; 1)), GFG_nameFunction + &quot;(&quot; + GFG_resultFormula + &quot;)&quot;, GFG_resultFormula);&#xa;&#x9;&lt;/then>&#xa;&lt;/if>&#xa;trace(&quot;#!#!#! ppc_GetFormulaGroup. Formula: &quot; + GFG_resultFormula + &quot; #!#!#!&quot;);&#xa;trace(&quot;#!#!#! ppc_GetFormulaGroup. &quot; + " valueType="string"/>
                </object>
                <object type="ASLExpression:udfReference" version="1.0">
                    <property name="value" valueType="url">UserDefinedFunction["ppc_RunTime"{01bdef00-6989-424b-84f9-c81ca2885e47}]</property>
                </object>
                <object type="ASLExpression:part" version="1.0">
                    <property name="expression" value="(GFG_startDate, new(&quot;java.util.Date&quot;)) + &quot; #!#!#!&quot;);&#xa;trace(&quot;#!#!#! ppc_GetFormulaGroup. Finished #!#!#!&quot;);&#xa;;GFG_resultFormula" valueType="string"/>
                </object>
            </property>
        </object>
    </property>
</object>